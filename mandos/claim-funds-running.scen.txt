{
    "name": "Try to claim funds from lottery while running",
    "gasSchedule": "dummy",
    "steps": [
        {
            "step": "externalSteps",
            "path": "buy-ticket.scen.json"
        },
        {
            "step": "setState",
            "comment": "only set block info this time",
            "currentBlockInfo": {
                "blockTimestamp": "750",
                "blockNonce": "550",
                "blockRound": "535",
                "blockEpoch": "546"
            }
        },
        {
            "step": "scCall",
            "txId": "claim funds while running",
            "tx": {
                "from": "address:my_address",
                "to": "sc:lotterynft",
                "function": "claim_funds",
                "arguments": ["10600000000000000000"],
                "egldValue": "0",
                "gasLimit": "100,000,000",
                "gasPrice": "0"
            },
            "expect": {
                "out": [],
                "status": "4",
                "gas": "*",
                "refund": "*",
                "message":"str:Lottery is running"
            }
        },
        {
            "step": "checkState",
            "accounts": {
              "address:my_address": {
                "nonce": "9",
                "balance": "20000000000000000000",
                "storage": {}
              },
              "address:team_wallet": {
                "nonce": "0",
                "balance": "1,000,000",
                "storage": {}
              },
              "address:nft_wallet": {
                "nonce": "0",
                "balance": "1,000,000",
                "storage": {}
              },
              "address:ecf_wallet": {
                "nonce": "0",
                "balance": "1,000,000",
                "storage": {}
              },
              "address:marketing_wallet": {
                "nonce": "0",
                "balance": "1,000,000",
                "storage": {}
              },
              "address:owner_wallet": {
                "nonce": "0",
                "balance": "1,000,000",
                "storage": {}
              },
              "address:acc1": {
                "nonce": "1",
                "balance": "1900000000000000000"
              },
              "address:acc2": {
                "nonce": "1",
                "balance": "1800000000000000000"
              },
              "address:acc3": {
                "nonce": "1",
                "balance": "1700000000000000000"
              },
              "sc:lotterynft": {
                "nonce": "0",
                "balance": "600000000000000000",
                "esdt": {
                  "str:NFT-123456": {
                    "instances": [
                      {
                        "nonce": "1",
                        "balance": "1"
                      }
                    ]
                  }
                },
                "storage": {
                  "str:maxTicketsPerAddress": "3",
                  "str:TicketPrice": "100000000000000000",
                  "str:MaxTickersPerLottery": "1000",
                  "str:teamwallet": "address:team_wallet",
                  "str:ElrondBunnyHolders": "address:nft_wallet",
                  "str:marketingwallet": "address:marketing_wallet",
                  "str:ecfholderswallet": "address:ecf_wallet",
                  "str:ownerwallet":"address:owner_wallet",
                  "str:prizepool": "0",
                  "str:nftstorage.len": "1",
                  "str:nftstorage.item|u32:1": "0x0000000a4e46542d3132333435360000000000000001",
                  "str:lotterystatus": "1",
                  "str:deadline": "1000",
                  "str:lotterycounter": "1",
                  "str:ticketcounter": "6",
                  "str:totalvolume": "600000000000000000",
                  "str:totalprize":"600000000000000000",
                  "str:ticketHolder.len": "6",
                  "str:ticketHolder.item|u32:1": "address:acc1",
                  "str:ticketHolder.item|u32:2": "address:acc2",
                  "str:ticketHolder.item|u32:3": "address:acc2",
                  "str:ticketHolder.item|u32:4": "address:acc3",
                  "str:ticketHolder.item|u32:5": "address:acc3",
                  "str:ticketHolder.item|u32:6": "address:acc3",
                  "str:ticketsPerAddress|address:acc1|u64:1": "1",
                  "str:ticketsPerAddress|address:acc2|u64:1": "2",
                  "str:ticketsPerAddress|address:acc3|u64:1": "3"
                },
                "code": "file:../output/mylotterynft.wasm"
              }
            }
          }
          ]
}